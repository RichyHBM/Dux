@(viewData: ObjectNode, response: auth.models.BasicAuthViewResponse)

@main(response) {

<script type="text/javascript">
        var app = angular.module('DuxApp');

        app.controller("LeaderboardCtrl", function($scope, $http) {

            $scope.gameId = @viewData.get("GameId");
            $scope.leaderboardName = "@viewData.get("LeaderboardName").asText()";
            $scope.startRank = @viewData.get("StartRank");
            $scope.count = @viewData.get("Count");
            $scope.users = [];

            $scope.getUsers = function() {
                $http.post('/api/get-ranked-users', {
                        gameId: $scope.gameId,
                        leaderboardName: $scope.leaderboardName,
                        startRank: $scope.startRank,
                        count: $scope.count
                    }).then(
                    function successCallback(response) {
                        $scope.users = response.data;
                    });
            }
            $scope.getUsers();
        });
</script>

<div ng-controller="LeaderboardCtrl" class="container">
    <div class="row">
        <div class="col-xs-2">
            <h3>Game: {{gameId}}</h3>
        </div>
        <div class="col-xs-7">
            <h3>Leaderboard: {{leaderboardName}}</h3>
        </div>
    </div>

    <table class="table table-striped table-hover ">
        <thead>
            <tr>
                <th class="col-xs-2">Rank</th>
                <th class="col-xs-3">ID</th>
                <th class="col-xs-2">Score</th>
                <th class="col-xs-4">Extra</th>
                <th class="col-xs-1"></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="user in users">
                <td>{{user.rank}}</td>
                <td>{{user.userId}}</td>
                <td>{{user.score}}</td>
                <td>{{user.extra}}</td>
                <td>
                    <span class="pull-right">
                        <i class="fa fa-times"></i>
                    </span>
                </td>
            </tr>
        </tbody>
    </table>

</div>


}
