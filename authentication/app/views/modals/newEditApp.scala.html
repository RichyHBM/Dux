@()

<script type="text/javascript">
var app = angular.module('DuxApp');

app.controller("newEditAppModalCtrl", function($scope, $http, $modalInstance, App) {
    $scope.appId = App.Id;
    $scope.appName = App.Name;
    $scope.appDescription = App.Description;
    $scope.errors = {};


    $scope.ok = function () {
        if($scope.newAppName == ''){
            $scope.errors.appName = true;
            return;
        }

        var url = '/view-api/new-app';
        if($scope.appId) {
            url = '/view-api/edit-app';
        }

        $http.post(url, {
            Id: $scope.appId,
            Name: $scope.appName,
            Description: $scope.appDescription
        }).then( function successCallback(response) {
            $modalInstance.refresh();
            $modalInstance.close();
        });
    };

    $scope.cancel = function () {
        $modalInstance.dismiss('cancel');
    };
});
</script>


<script type="text/ng-template" id="newEditAppModal.html">
    <div class="modal-header">
        <h3 class="modal-title">{{ appId ? 'Editing app ' + appId : 'New App' }}</h3>
    </div>
    <div class="modal-body">
        <div class="form-group {{ errors.appName ? 'has-error' : '' }}">
            <label class="control-label" for="appName">Name</label>
            <input type="text" class="form-control" id="appName" ng-model="appName" tooltip-trigger="focus">
        </div>
        <div class="form-group">
            <label class="control-label" for="appDescription">Description</label>
                <textarea type="text" class="form-control" rows="3" id="appDescription" ng-model="appDescription" tooltip-trigger="focus">
                </textarea>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
        <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    </div>
</script>